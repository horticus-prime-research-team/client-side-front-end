(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t){},124:function(e,t,a){},125:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){},221:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(4),m=a(6),o=a(5),i=a(7),u=a(0),s=a.n(u),l=a(76),c=a.n(l),p=a(13),d=a(19),h=a.n(d),f=s.a.createContext(),b=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(m.a)(this,Object(o.a)(t).call(this,e))).login=function(e){h.a.save("auth",e),a.setLoginState(!0)},a.logout=function(){h.a.remove("auth"),a.setLoginState(!1)},a.setLoginState=function(e){var t=h.a.load("auth");a.setState({token:t,loggedIn:e})};var r=new URLSearchParams(window.location.search),i=h.a.load("auth"),u=r.get("token")||i||null;return a.state={loggedIn:!!u,token:u,login:a.login,logout:a.logout},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(f.Provider,{value:this.state},this.props.children)}}]),t}(s.a.Component),S=a(10),g=a.n(S),N=a(31),E=a(77),v=a.n(E),y=(a(124),v()("https://calm-river-80577.herokuapp.com")),T=function(){var e=Object(u.useState)(0),t=Object(N.a)(e,2),a=t[0],n=t[1],r=Object(u.useState)("dry"),m=Object(N.a)(r,2),o=m[0],i=m[1],l=Object(u.useState)("dryStyle"),c=Object(N.a)(l,2),p=c[0],d=c[1];return Object(u.useEffect)(function(){y.on("moisture-data",function(e){n(e.val),e.val<=299?(i("Dry"),d("dryStyle")):e.val>=300&&e.val<=599?(i("Moist"),d("moistStyle")):(i("Wet"),d("wetStyle"))})},[]),s.a.createElement("section",{className:"moistureStream"},s.a.createElement("h2",{className:"number"},"Moisture Number: ",a),s.a.createElement("div",{className:p}),s.a.createElement("h2",{className:"status"},"Moisture Status: ",o),s.a.createElement("p",{className:"legend"},"Legend: 0 - 299 Dry, 300 - 599 Moist, 600+ Wet"))},O=a(78),j=a(1),Z=(a(125),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(m.a)(this,Object(o.a)(t).call(this,e))).handleSubmit=function(e){g.a.get("https://polar-springs-72876.herokuapp.com/moisture").query({year:j().format("YYYY"),month:j().format("MM"),day:j().format("DD")}).then(function(e){var t=JSON.parse(e.text)[0].reads;a.setState({days:t})}).catch(function(e){return console.error(e)})},a.getDatafromdb=function(e){e.preventDefault(),a.setState({days:O.DAYS})},a.state={days:[]},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.handleSubmit()}},{key:"renderTableData",value:function(){return this.state.days.map(function(e,t){return s.a.createElement("tr",{className:"tr",key:t},s.a.createElement("td",{className:"td"},j(e.timestamp).format("YYYY")),s.a.createElement("td",{className:"td"},j(e.timestamp).format("MM")),s.a.createElement("td",{className:"td"},j(e.timestamp).format("DD")),s.a.createElement("td",{className:"td"},j(e.timestamp).format("hh"),":",j(e.timestamp).format("mm")),s.a.createElement("td",{className:"td"},e.moistureNumber))})}},{key:"renderTableHeader",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("th",{className:"th"},"Years"),s.a.createElement("th",{className:"th"},"Months"),s.a.createElement("th",{className:"th"},"Days"),s.a.createElement("th",{className:"th"},"Time"),s.a.createElement("th",{className:"th"},"Data"))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",{id:"title"},"Moisture Level"),s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,this.renderTableHeader()),this.renderTableData())))}}]),t}(s.a.Component)),D=a(79),k=a(80),C=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(m.a)(this,Object(o.a)(t).call(this,e))).handleSubmit=function(e){g.a.get("https://polar-springs-72876.herokuapp.com/moisture").query({year:j().format("YYYY"),month:j().format("MM"),day:j().format("DD")}).then(function(e){var t=JSON.parse(e.text)[0].reads;a.setState({reading:t}),console.log("READING",a.state.reading),a.getDataFromDB()}).catch(function(e){return console.error(e)})},a.getDataFromDB=function(e){var t=a.state.reading.reduce(function(e,t){return t="".concat(j(t.timestamp).format("HH"),":").concat(j(t.timestamp).format("mm")),e.push(t),e},[]),n=a.state.reading.reduce(function(e,t){return t=t.moistureNumber,e.push(t),e},[]);a.setState(function(e){return{data:{labels:t,datasets:[Object(D.a)({},e.data.datasets[0],{data:n})]}}})},a.state={data:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"Moisture Level",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:[0,10,5,2,20,30,45],fill:!1}]},reading:[]},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){console.log("handleSubmit"),this.handleSubmit()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(k.a,{data:this.state.data}))}}]),t}(s.a.Component),w=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(m.a)(this,Object(o.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),g.a.post("".concat(a.state.API,"/signup")).send({email:a.state.email,password:a.state.password,role:a.state.role}).then(function(e){var t=e.text;console.log(t),a.context.login(t)}).catch(function(e){return console.error(e)})},a.handleChange=function(e){e.preventDefault(),a.setState(Object(p.a)({},e.target.name,e.target.value)),console.log(e.target.value)},a.state={API:"https://polar-springs-72876.herokuapp.com",email:"",password:"",role:""},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{placeholder:"Email",name:"email",onChange:this.handleChange}),s.a.createElement("input",{placeholder:"Password",name:"password",onChange:this.handleChange}),s.a.createElement("select",{name:"role",onChange:this.handleChange},s.a.createElement("option",{value:"admin"},"Admin"),s.a.createElement("option",{value:"senior"},"Senior"),s.a.createElement("option",{value:"assistant"},"Assistant")),s.a.createElement("input",{type:"submit",value:"Create User"}))}}]),t}(s.a.Component),M=a(82),Y=a.n(M),x=(a(218),"https://polar-springs-72876.herokuapp.com"),L=function(e){return e.condition?e.children:null},A=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(m.a)(this,Object(o.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),g.a.get("".concat(x,"/signin")).auth(a.state.email,a.state.password).then(function(e){var t=e.text;a.context.login(t)}).catch(function(e){return console.error(e)})},a.state={email:"",password:""},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(L,{condition:this.context.loggedIn},s.a.createElement("button",{onClick:this.context.logout},"Log Out"),s.a.createElement(T,null),s.a.createElement(Z,null),s.a.createElement(C,null),s.a.createElement(w,null)),s.a.createElement(L,{condition:!this.context.loggedIn},s.a.createElement("section",{className:"login"},s.a.createElement("img",{src:Y.a,alt:"logo"}),s.a.createElement("form",{className:"loginForm",onSubmit:this.handleSubmit},s.a.createElement("input",{placeholder:"Email",name:"email",onChange:this.handleChange}),s.a.createElement("input",{placeholder:"Password",name:"password",onChange:this.handleChange}),s.a.createElement("input",{type:"submit",value:"Login"})))))}}]),t}(s.a.Component);A.contextType=f;var I=A,F=(a(219),a(220),function(e){function t(){return Object(n.a)(this,t),Object(m.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(b,null,s.a.createElement(I,null)))}}]),t}(s.a.Component));a.d(t,"default",function(){return J});var J=function(e){function t(){return Object(n.a)(this,t),Object(m.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(F,null)}}]),t}(s.a.Component),P=document.getElementById("root");c.a.render(s.a.createElement(J,null),P)},78:function(e){e.exports={DAYS:[{year:2019,month:7,day:28,reads:[{timeStamp:"2019-07-28T00:00:53.798Z",moistureNum:300},{timeStamp:"2019-07-28T00:15:53.798Z",moistureNum:250},{timeStamp:"2019-07-28T00:30:53.798Z",moistureNum:225},{timeStamp:"2019-07-28T00:30:53.798Z",moistureNum:225},{timeStamp:"2019-07-28T00:30:53.798Z",moistureNum:225},{timeStamp:"2019-07-28T00:00:53.798Z",moistureNum:300},{timeStamp:"2019-07-28T00:15:53.798Z",moistureNum:250},{timeStamp:"2019-07-28T00:30:53.798Z",moistureNum:225},{timeStamp:"2019-07-28T00:30:53.798Z",moistureNum:225},{timeStamp:"2019-07-28T00:30:53.798Z",moistureNum:225},{timeStamp:"2019-07-28T00:30:53.798Z",moistureNum:225}]},{year:2019,month:7,day:29,reads:[{timeStamp:"2019-07-29T00:00:53.798Z",moistureNum:50},{timeStamp:"2019-07-29T00:15:53.798Z",moistureNum:75},{timeStamp:"2019-07-29T00:30:53.798Z",moistureNum:60},{timeStamp:"2019-07-29T00:30:53.798Z",moistureNum:99},{timeStamp:"2019-07-29T00:30:53.798Z",moistureNum:99},{timeStamp:"2019-07-29T00:00:53.798Z",moistureNum:50},{timeStamp:"2019-07-29T00:15:53.798Z",moistureNum:75},{timeStamp:"2019-07-29T00:30:53.798Z",moistureNum:60},{timeStamp:"2019-07-29T00:30:53.798Z",moistureNum:99},{timeStamp:"2019-07-29T00:30:53.798Z",moistureNum:99},{timeStamp:"2019-07-29T00:30:53.798Z",moistureNum:99}]},{year:2019,month:7,day:30,reads:[{timeStamp:"2019-07-30T00:00:53.798Z",moistureNum:101},{timeStamp:"2019-07-30T00:15:53.798Z",moistureNum:60},{timeStamp:"2019-07-30T00:30:53.798Z",moistureNum:320},{timeStamp:"2019-07-30T00:30:53.798Z",moistureNum:320},{timeStamp:"2019-07-30T00:30:53.798Z",moistureNum:320},{timeStamp:"2019-07-30T00:00:53.798Z",moistureNum:101},{timeStamp:"2019-07-30T00:15:53.798Z",moistureNum:60},{timeStamp:"2019-07-30T00:30:53.798Z",moistureNum:320},{timeStamp:"2019-07-30T00:30:53.798Z",moistureNum:320},{timeStamp:"2019-07-30T00:30:53.798Z",moistureNum:320},{timeStamp:"2019-07-30T00:30:53.798Z",moistureNum:320}]},{year:2019,month:7,day:31,reads:[{timeStamp:"2019-07-31T00:00:53.798Z",moistureNum:0},{timeStamp:"2019-07-31T00:15:53.798Z",moistureNum:50},{timeStamp:"2019-07-31T00:30:53.798Z",moistureNum:300},{timeStamp:"2019-07-31T00:30:53.798Z",moistureNum:300},{timeStamp:"2019-07-31T00:30:53.798Z",moistureNum:300},{timeStamp:"2019-07-31T00:00:53.798Z",moistureNum:0},{timeStamp:"2019-07-31T00:15:53.798Z",moistureNum:50},{timeStamp:"2019-07-31T00:30:53.798Z",moistureNum:300},{timeStamp:"2019-07-31T00:30:53.798Z",moistureNum:300},{timeStamp:"2019-07-31T00:30:53.798Z",moistureNum:300},{timeStamp:"2019-07-31T00:30:53.798Z",moistureNum:300}]}]}},82:function(e,t,a){e.exports=a.p+"static/media/plantLogo.eb68d565.png"},83:function(e,t,a){e.exports=a(221)}},[[83,1,2]]]);
//# sourceMappingURL=main.f286110c.chunk.js.map